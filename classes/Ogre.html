<!DOCTYPE html><html class="default no-js"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Ogre | ogre-router</title><meta name="description" content="Documentation for ogre-router"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">ogre-router</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">ogre-router</a></li><li><a href="Ogre.html">Ogre</a></li></ul><h1>Class Ogre</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">Ogre</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="Ogre.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section tsd-is-private tsd-is-private-protected"><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#gotUserSubject" class="tsd-kind-icon">got<wbr/>User<wbr/>Subject</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#messages" class="tsd-kind-icon">messages</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#signaler" class="tsd-kind-icon">signaler</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#storageService" class="tsd-kind-icon">storage<wbr/>Service</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#targetUser" class="tsd-kind-icon">target<wbr/>User</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#user" class="tsd-kind-icon">user</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#createCircuit" class="tsd-kind-icon">create<wbr/>Circuit</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#layerMessage" class="tsd-kind-icon">layer<wbr/>Message</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#observeMessages" class="tsd-kind-icon">observe<wbr/>Messages</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#observePeerList" class="tsd-kind-icon">observe<wbr/>Peer<wbr/>List</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#onUserLoaded" class="tsd-kind-icon">on<wbr/>User<wbr/>Loaded</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#peelMessage" class="tsd-kind-icon">peel<wbr/>Message</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#selectTargetPeer" class="tsd-kind-icon">select<wbr/>Target<wbr/>Peer</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#sendMessage" class="tsd-kind-icon">send<wbr/>Message</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#transferMessage" class="tsd-kind-icon">transfer<wbr/>Message</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#updateAlias" class="tsd-kind-icon">update<wbr/>Alias</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class"><a name="constructor" class="tsd-anchor"></a><h3>constructor</h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">new <wbr/>Ogre<span class="tsd-signature-symbol">(</span>ogreConfig<span class="tsd-signature-symbol">?: </span><a href="../interfaces/IOgreConfig.html" class="tsd-signature-type" data-tsd-kind="Interface">IOgreConfig</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="Ogre.html" class="tsd-signature-type" data-tsd-kind="Class">Ogre</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L49">models/ogre.ts:49</a></li></ul></aside><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> ogreConfig: <a href="../interfaces/IOgreConfig.html" class="tsd-signature-type" data-tsd-kind="Interface">IOgreConfig</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="Ogre.html" class="tsd-signature-type" data-tsd-kind="Class">Ogre</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group tsd-is-private tsd-is-private-protected"><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-private"><a name="gotUserSubject" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagPrivate">Private</span> got<wbr/>User<wbr/>Subject</h3><div class="tsd-signature tsd-kind-icon">got<wbr/>User<wbr/>Subject<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">BehaviorSubject</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="User.html" class="tsd-signature-type" data-tsd-kind="Class">User</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol"> = ...</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L47">models/ogre.ts:47</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-private"><a name="messages" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagPrivate">Private</span> messages</h3><div class="tsd-signature tsd-kind-icon">messages<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Subject</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/IBaseMessage.html" class="tsd-signature-type" data-tsd-kind="Interface">IBaseMessage</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol"> = ...</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L44">models/ogre.ts:44</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-private"><a name="signaler" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagPrivate">Private</span> signaler</h3><div class="tsd-signature tsd-kind-icon">signaler<span class="tsd-signature-symbol">:</span> <a href="Signaler.html" class="tsd-signature-type" data-tsd-kind="Class">Signaler</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L39">models/ogre.ts:39</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-private"><a name="storageService" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagPrivate">Private</span> storage<wbr/>Service</h3><div class="tsd-signature tsd-kind-icon">storage<wbr/>Service<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">StorageService</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L45">models/ogre.ts:45</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-private"><a name="targetUser" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagPrivate">Private</span> target<wbr/>User</h3><div class="tsd-signature tsd-kind-icon">target<wbr/>User<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="../interfaces/IUserRef.html" class="tsd-signature-type" data-tsd-kind="Interface">IUserRef</a><span class="tsd-signature-symbol"> = ...</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L42">models/ogre.ts:42</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-private"><a name="user" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagPrivate">Private</span> user</h3><div class="tsd-signature tsd-kind-icon">user<span class="tsd-signature-symbol">:</span> <a href="User.html" class="tsd-signature-type" data-tsd-kind="Class">User</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L40">models/ogre.ts:40</a></li></ul></aside></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-private"><a name="createCircuit" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagPrivate">Private</span> create<wbr/>Circuit</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-private"><li class="tsd-signature tsd-kind-icon">create<wbr/>Circuit<span class="tsd-signature-symbol">(</span>targetUser<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="../interfaces/IUserRef.html" class="tsd-signature-type" data-tsd-kind="Interface">IUserRef</a>, maxORs<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L157">models/ogre.ts:157</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Creates the circuit that will determine what users the message will go through.
Currently only uses users from the peer list.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>targetUser: <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="../interfaces/IUserRef.html" class="tsd-signature-type" data-tsd-kind="Interface">IUserRef</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>target user at the end of the circuit</p>
</div></div></li><li><h5>maxORs: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 1</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>max number of users in the circuit</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></h4><div><p>a string of user ids the message will route through</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-private"><a name="layerMessage" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagPrivate">Private</span> layer<wbr/>Message</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-private"><li class="tsd-signature tsd-kind-icon">layer<wbr/>Message<span class="tsd-signature-symbol">(</span>circuit<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span>, message<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L182">models/ogre.ts:182</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Wraps the message in layers. Each layer will be peeled back by a user in the route.
Currently does not encrypt anything.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>circuit: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>generated circuit of user ids</p>
</div></div></li><li><h5>message: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>message to wrap in layers</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">string</span></h4><div><p>A string representing a message wrapped in layers and ready to be sent</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="observeMessages" class="tsd-anchor"></a><h3>observe<wbr/>Messages</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">observe<wbr/>Messages<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Observable</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/IBaseMessage.html" class="tsd-signature-type" data-tsd-kind="Interface">IBaseMessage</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L100">models/ogre.ts:100</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>This observable is used to listen to messages sent to the current user.</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Observable</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/IBaseMessage.html" class="tsd-signature-type" data-tsd-kind="Interface">IBaseMessage</a><span class="tsd-signature-symbol">&gt;</span></h4><div><p>An observable that emits messages</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="observePeerList" class="tsd-anchor"></a><h3>observe<wbr/>Peer<wbr/>List</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">observe<wbr/>Peer<wbr/>List<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Observable</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/IUserRef.html" class="tsd-signature-type" data-tsd-kind="Interface">IUserRef</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L92">models/ogre.ts:92</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>An observable used to listen to changes in the peer list.
This will emit when someone joins the network, leaves the network
or changes their name on the network</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Observable</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/IUserRef.html" class="tsd-signature-type" data-tsd-kind="Interface">IUserRef</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><div><p>An observable that emits the list of peers when it changes.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="onUserLoaded" class="tsd-anchor"></a><h3>on<wbr/>User<wbr/>Loaded</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">on<wbr/>User<wbr/>Loaded<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Observable</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="User.html" class="tsd-signature-type" data-tsd-kind="Class">User</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L82">models/ogre.ts:82</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>An observable that can be used to determine when user data has finished loading.
Attempting to access some functionality before user data has been loaded
will result in some errors.</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Observable</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="User.html" class="tsd-signature-type" data-tsd-kind="Class">User</a><span class="tsd-signature-symbol">&gt;</span></h4><div><p>An observable that emits when the user data is loaded from storage.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-private"><a name="peelMessage" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagPrivate">Private</span> peel<wbr/>Message</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-private"><li class="tsd-signature tsd-kind-icon">peel<wbr/>Message<span class="tsd-signature-symbol">(</span>layeredMessage<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-symbol">{ </span>message<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>next<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> }</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L201">models/ogre.ts:201</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Peels a single layer from the message and returns the contents.
If the message is the last one and the current user is the target,
then this function will return undefined and emit a new value to the messages subject.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>layeredMessage: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>the layered message string to peel a layer from.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-symbol">{ </span>message<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>next<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> }</span></h4><div><p>the peeled message or undefined if there was an error or it&#39;s the last message.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="selectTargetPeer" class="tsd-anchor"></a><h3>select<wbr/>Target<wbr/>Peer</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">select<wbr/>Target<wbr/>Peer<span class="tsd-signature-symbol">(</span>user<span class="tsd-signature-symbol">: </span><a href="../interfaces/IUserRef.html" class="tsd-signature-type" data-tsd-kind="Interface">IUserRef</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L125">models/ogre.ts:125</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Updates the current target user.
The currently target user is the user messages will be sent to.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>user: <a href="../interfaces/IUserRef.html" class="tsd-signature-type" data-tsd-kind="Interface">IUserRef</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The user reference.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="sendMessage" class="tsd-anchor"></a><h3>send<wbr/>Message</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">send<wbr/>Message<span class="tsd-signature-symbol">(</span>message<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L136">models/ogre.ts:136</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Sends a message to the currently targeted user via the ogre network.
The message will be wrapped in layers and routed through different users.
Each user will peel a layer and send it to the next user
until it reaches the target.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>message: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>message to send</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-private"><a name="transferMessage" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagPrivate">Private</span> transfer<wbr/>Message</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-private"><li class="tsd-signature tsd-kind-icon">transfer<wbr/>Message<span class="tsd-signature-symbol">(</span>layeredMessage<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L223">models/ogre.ts:223</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Transfers a message from the current user to the target in the message.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>layeredMessage: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>the layered message to transfer</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><div><p>a promise indicating completion</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a name="updateAlias" class="tsd-anchor"></a><h3>update<wbr/>Alias</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">update<wbr/>Alias<span class="tsd-signature-symbol">(</span>updatedName<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="User.html" class="tsd-signature-type" data-tsd-kind="Class">User</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/NthMetal/ogre-router/blob/054854e/src/models/ogre.ts#L113">models/ogre.ts:113</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Updates the user&#39;s alias. This will:</p>
<ol>
<li>Send a message to the signaling server indicating an update to the signature is needed.</li>
<li>Wait till the signaling server responds with the signature.</li>
<li>Update the user&#39;s info in memory.</li>
<li>Update the user&#39;s info in the storage.</li>
</ol>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>updatedName: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The new name. The number will stay the same.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="User.html" class="tsd-signature-type" data-tsd-kind="Class">User</a><span class="tsd-signature-symbol">&gt;</span></h4><div><p>A promise with the updated user.</p>
</div></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class"><a href="Ogre.html" class="tsd-kind-icon">Ogre</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="Ogre.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#gotUserSubject" class="tsd-kind-icon">got<wbr/>User<wbr/>Subject</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#messages" class="tsd-kind-icon">messages</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#signaler" class="tsd-kind-icon">signaler</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#storageService" class="tsd-kind-icon">storage<wbr/>Service</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#targetUser" class="tsd-kind-icon">target<wbr/>User</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#user" class="tsd-kind-icon">user</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#createCircuit" class="tsd-kind-icon">create<wbr/>Circuit</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#layerMessage" class="tsd-kind-icon">layer<wbr/>Message</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#observeMessages" class="tsd-kind-icon">observe<wbr/>Messages</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#observePeerList" class="tsd-kind-icon">observe<wbr/>Peer<wbr/>List</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#onUserLoaded" class="tsd-kind-icon">on<wbr/>User<wbr/>Loaded</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#peelMessage" class="tsd-kind-icon">peel<wbr/>Message</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#selectTargetPeer" class="tsd-kind-icon">select<wbr/>Target<wbr/>Peer</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#sendMessage" class="tsd-kind-icon">send<wbr/>Message</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><a href="Ogre.html#transferMessage" class="tsd-kind-icon">transfer<wbr/>Message</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="Ogre.html#updateAlias" class="tsd-kind-icon">update<wbr/>Alias</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>